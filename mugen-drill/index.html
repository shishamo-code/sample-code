<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>たしざんドリル</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: sans-serif;
      background: #f0f0f0;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background-image: url("background.png");
      background-size: cover;        /* 全画面に拡大 */
      background-position: center;   /* 中央に配置 */
      background-repeat: no-repeat;  /* 繰り返さない */
    }

    .container {
      text-align: center;
      background-color: #fff;
      border-radius: 10%;
      padding: 20px;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 10px;
    }

    #score {
      font-size: 28px;
      margin: 0 0 30px;
    }

    .problem {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 32px;
      margin: 20px 0;
    }

    .question {
      width: 200px;
      text-align: right;
      padding-right: 20px;
    }

    input {
      font-size: 28px;
      width: 100px;
      text-align: center;
    }

    /* スピンボタン非表示（Chrome, Safari） */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* スピンボタン非表示（Firefox） */
    input[type=number] {
      -moz-appearance: textfield;
    }

    .result {
      font-size: 26px;
      margin-left: 15px;
      width: 200px;
      text-align: left;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>たしざん に ちょうせん！</h1>
    <div id="score">✅ せいかい：0　❌ ふせいかい：0</div>
    <div id="quiz-area"></div>
  </div>

  <script>
    const quizArea = document.getElementById("quiz-area");
    const scoreDisplay = document.getElementById("score");
    let inputs = [];
    let correctCount = 0;
    let wrongCount = 0;

    function updateScore() {
      scoreDisplay.textContent = `✅ せいかい：${correctCount}　❌ ふせいかい：${wrongCount}`;
    }

    function createQuiz() {
      quizArea.innerHTML = "";
      inputs = [];

      for (let i = 0; i < 5; i++) {
        const num1 = Math.floor(Math.random() * 10) + 1;
        const num2 = Math.floor(Math.random() * 10) + 1;
        const answer = num1 + num2;

        const div = document.createElement("div");
        div.className = "problem";

        const questionSpan = document.createElement("div");
        questionSpan.className = "question";
        questionSpan.textContent = `${num1} + ${num2} = `;

        const input = document.createElement("input");
        input.type = "number";
        input.dataset.answer = answer;
        input.dataset.index = i;
        input.dataset.answered = "false";

        const result = document.createElement("span");
        result.className = "result";

        input.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            const idx = Number(input.dataset.index);
            if (input.dataset.answered === "true") return;

            const userAnswer = Number(input.value);
            const correctAnswer = Number(input.dataset.answer);

            if (userAnswer === correctAnswer) {
              result.textContent = "〇 せいかい！";
              result.style.color = "green";
              correctCount++;
            } else {
              result.textContent = `× ちがうよ（せいかい: ${correctAnswer}）`;
              result.style.color = "red";
              wrongCount++;
            }

            input.dataset.answered = "true";
            updateScore();

            if (inputs[idx + 1]) {
              inputs[idx + 1].focus();
            }

            if (idx === 4) {
              setTimeout(() => {
                createQuiz();
              }, 3000);
            }
          }
        });

        div.appendChild(questionSpan);
        div.appendChild(input);
        div.appendChild(result);

        quizArea.appendChild(div);
        inputs.push(input);
      }

      inputs[0].focus();
    }

    updateScore();
    createQuiz();
  </script>

</body>
</html>
